{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Pumbaa","text":""},{"location":"#what-is-pumbaa","title":"What is Pumbaa?","text":"<p>Pumbaa is a command-line tool that simplifies interaction with Cromwell \u2014 an execution engine for bioinformatics workflows.</p> <p>Who is it for?</p> <p>Bioinformaticians and developers running WDL pipelines who need practical tools for monitoring, debugging, and efficiency analysis.</p>"},{"location":"#quick-start","title":"Quick Start","text":"1. Install2. Configure3. Use <pre><code>curl -sSL https://raw.githubusercontent.com/lmtani/pumbaa/main/install.sh | bash\n</code></pre> <pre><code>pumbaa config init\n</code></pre> <pre><code>pumbaa dashboard\n</code></pre>"},{"location":"#features","title":"Features","text":"<ul> <li> <p> Interactive Dashboard</p> <p>View and manage workflows in a terminal UI (TUI) with real-time updates.</p> <pre><code>pumbaa dashboard\n</code></pre> </li> <li> <p> AI Chat</p> <p>Query workflows and read GCS files using natural language.</p> <pre><code>pumbaa chat\n</code></pre> </li> <li> <p> Efficiency Analysis</p> <p>Compare actual execution time vs. allocated resources. Identify tasks with CPU/memory over-provisioning.</p> </li> <li> <p> WDL Bundling</p> <p>Package your workflow with all dependencies into a single distributable file.</p> <pre><code>pumbaa bundle --workflow main.wdl\n</code></pre> </li> </ul>"},{"location":"#highlights","title":"Highlights","text":"Feature Description Terminal-first Rich TUI interfaces for power users Portable Single binary, no dependencies Efficient Resource utilization analysis for cost optimization Native Go Fast, compiled, cross-platform"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li> Installation \u2014 Detailed instructions</li> <li> Quick Start \u2014 Get started</li> <li> Configuration \u2014 Options and providers</li> <li> Features \u2014 All features in detail</li> <li> Chat Agent \u2014 Query workflows with AI</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li> Issues \u2014 Bugs and feature requests</li> <li> Discussions \u2014 Questions and ideas</li> </ul>"},{"location":"ARCHITECTURE/","title":"Pumbaa - Architecture Documentation","text":""},{"location":"ARCHITECTURE/#overview","title":"Overview","text":"<p>Pumbaa is a CLI tool for interacting with the Cromwell workflow engine and WDL files. The project follows Clean Architecture principles with a clear separation between domain logic, application use cases, infrastructure implementations, and user interfaces.</p>"},{"location":"ARCHITECTURE/#core-features","title":"Core Features","text":"<ul> <li>Workflow Operations: Submit, query, monitor, abort, and debug Cromwell workflows</li> <li>Interactive TUI Dashboard: Real-time workflow monitoring with filtering and status tracking</li> <li>Debug TUI: Visual tree navigation of workflow execution with call details and failure analysis</li> <li>AI Chat Agent: LLM-powered assistant for workflow analysis and troubleshooting (Gemini, Vertex AI, Ollama)</li> <li>WDL Bundle Creation: Package WDL workflows with dependencies into distributable ZIP files</li> <li>WDL Indexing: Fast search and discovery of WDL tasks and workflows</li> <li>Resource Monitoring: Analyze resource usage from monitoring logs</li> <li>Telemetry: Optional usage tracking with Sentry integration</li> </ul>"},{"location":"ARCHITECTURE/#project-structure","title":"Project Structure","text":"<pre><code>\u251c\u2500\u2500 cmd/cli/                    # Application entry point\n\u251c\u2500\u2500 internal/                   # Private application code\n\u2502   \u251c\u2500\u2500 application/            # Use cases (Application Layer)\n\u2502   \u2502   \u251c\u2500\u2500 errors.go           # Application layer error types\n\u2502   \u2502   \u251c\u2500\u2500 bundle/             # WDL bundle creation\n\u2502   \u2502   \u2514\u2500\u2500 workflow/           # Workflow use cases (flat structure)\n\u2502   \u2502       \u251c\u2500\u2500 abort.go        # Abort running workflows\n\u2502   \u2502       \u251c\u2500\u2500 debug.go        # Debug info parsing\n\u2502   \u2502       \u251c\u2500\u2500 metadata.go     # Metadata retrieval\n\u2502   \u2502       \u251c\u2500\u2500 monitoring.go   # Resource usage analysis\n\u2502   \u2502       \u251c\u2500\u2500 query.go        # Workflow querying\n\u2502   \u2502       \u251c\u2500\u2500 submit.go       # Workflow submission\n\u2502   \u2502       \u2514\u2500\u2500 testutil_test.go # Shared test mocks\n\u2502   \u251c\u2500\u2500 config/                 # Configuration management\n\u2502   \u251c\u2500\u2500 container/              # Dependency injection container\n\u2502   \u251c\u2500\u2500 domain/                 # Domain entities and interfaces (Domain Layer)\n\u2502   \u2502   \u251c\u2500\u2500 bundle/             # Bundle entities and errors\n\u2502   \u2502   \u251c\u2500\u2500 ports/              # Port interfaces and errors\n\u2502   \u2502   \u251c\u2500\u2500 wdlindex/           # WDL index entities\n\u2502   \u2502   \u2514\u2500\u2500 workflow/           # Workflow entities and errors\n\u2502   \u251c\u2500\u2500 infrastructure/         # External services adapters (Infrastructure Layer)\n\u2502   \u2502   \u251c\u2500\u2500 chat/               # LLM integrations and agent tools\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 agent/tools/    # Tool registry for chat agent\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 llm/            # LLM providers (Gemini, Vertex, Ollama)\n\u2502   \u2502   \u251c\u2500\u2500 cromwell/           # Cromwell API client\n\u2502   \u2502   \u251c\u2500\u2500 session/            # SQLite session management\n\u2502   \u2502   \u251c\u2500\u2500 storage/            # File storage (local and GCS)\n\u2502   \u2502   \u251c\u2500\u2500 telemetry/          # Telemetry service (Sentry/NoOp)\n\u2502   \u2502   \u2514\u2500\u2500 wdl/                # WDL indexer implementation\n\u2502   \u2514\u2500\u2500 interfaces/             # UI adapters (Interface Layer)\n\u2502       \u251c\u2500\u2500 cli/handler/        # CLI command handlers\n\u2502       \u251c\u2500\u2500 cli/presenter/      # Output formatters\n\u2502       \u2514\u2500\u2500 tui/                # Terminal User Interfaces\n\u2502           \u251c\u2500\u2500 chat/           # Chat agent TUI\n\u2502           \u251c\u2500\u2500 configwizard/   # Configuration setup wizard\n\u2502           \u251c\u2500\u2500 dashboard/      # Workflow dashboard TUI\n\u2502           \u2514\u2500\u2500 debug/          # Debug tree navigation TUI\n\u2514\u2500\u2500 pkg/wdl/                    # Public WDL parsing library\n    \u251c\u2500\u2500 ast/                    # Abstract Syntax Tree\n    \u251c\u2500\u2500 parser/                 # ANTLR-generated parser\n    \u2514\u2500\u2500 visitor/                # AST visitor\n</code></pre>"},{"location":"ARCHITECTURE/#architecture-layers","title":"Architecture Layers","text":""},{"location":"ARCHITECTURE/#1-domain-layer-internaldomain","title":"1. Domain Layer (<code>internal/domain/</code>)","text":"<p>Contains business entities, value objects, and port interfaces. This layer has no dependencies on external frameworks or libraries.</p> <p>Packages:</p> <ul> <li><code>ports/</code>: Port interfaces (Hexagonal Architecture)</li> <li><code>WorkflowRepository</code> - Primary port for all workflow operations (execution, metadata, health, labels)</li> <li><code>FileProvider</code> - Port for file storage access (local and cloud)</li> <li><code>WDLRepository</code> - Port for WDL indexing operations</li> <li> <p><code>errors.go</code> - Port-level errors (<code>ErrFileNotFound</code>, <code>ErrFileTooLarge</code>, <code>FileError</code>)</p> </li> <li> <p><code>workflow/</code>: Core workflow entities (<code>Workflow</code>, <code>Call</code>, <code>Status</code>, <code>HealthStatus</code>)</p> </li> <li><code>errors.go</code> - Domain errors (<code>ErrWorkflowNotFound</code>, <code>ValidationError</code>, <code>APIError</code>)</li> <li><code>bundle/</code>: WDL bundle entities</li> <li><code>errors.go</code> - Bundle errors (<code>ErrCircularDependency</code>, <code>DependencyError</code>)</li> <li><code>wdlindex/</code>: WDL index entities (<code>Index</code>, <code>IndexedTask</code>, <code>IndexedWorkflow</code>)</li> </ul>"},{"location":"ARCHITECTURE/#2-application-layer-internalapplication","title":"2. Application Layer (<code>internal/application/</code>)","text":"<p>Contains use cases that orchestrate domain logic. Each use case is a single business operation with a clear input and output.</p> <p>Error Handling:</p> <ul> <li><code>errors.go</code> - Application-level errors (<code>UseCaseError</code>, <code>InputValidationError</code>)</li> <li>Wraps domain/infrastructure errors with operation context</li> <li>Allows handlers to differentiate error types</li> </ul> <p>Use Cases (flat structure in <code>workflow/</code>):</p> <ul> <li><code>submit.go</code> - Submit workflows to Cromwell with validation</li> <li><code>metadata.go</code> - Retrieve workflow execution metadata</li> <li><code>abort.go</code> - Abort running workflows</li> <li><code>query.go</code> - Query workflows with filters (status, name, dates)</li> <li><code>debug.go</code> - Parse metadata and build execution trees for debugging</li> <li><code>monitoring.go</code> - Analyze resource usage from monitoring logs (CPU, memory, disk)</li> <li><code>bundle/</code> - Create WDL bundles with dependency resolution</li> </ul>"},{"location":"ARCHITECTURE/#3-infrastructure-layer-internalinfrastructure","title":"3. Infrastructure Layer (<code>internal/infrastructure/</code>)","text":"<p>Contains implementations of external services and adapters for domain interfaces.</p> <p>Implementations:</p> <ul> <li><code>cromwell/</code>: Cromwell REST API client implementing <code>ports.WorkflowRepository</code></li> <li>HTTP client with timeout configuration</li> <li>JSON marshaling/unmarshaling</li> <li>Error handling and status code mapping</li> <li> <p>Complete workflow lifecycle management</p> </li> <li> <p><code>chat/llm/</code>: LLM provider implementations</p> </li> <li><code>ollama/</code> - Local Ollama integration</li> <li><code>gemini.go</code> - Google Gemini API client</li> <li><code>vertex.go</code> - Google Vertex AI client</li> <li> <p><code>factory.go</code> - LLM provider factory pattern</p> </li> <li> <p><code>chat/agent/tools/</code>: Tool registry for AI agent</p> </li> <li><code>cromwell/</code>: Query, status, metadata, logs, outputs tools</li> <li><code>gcs/</code>: Google Cloud Storage file download</li> <li><code>wdl/</code>: WDL search, list, and info tools</li> <li> <p><code>registry.go</code>: Tool registration and schema generation</p> </li> <li> <p><code>wdl/</code>: WDL indexer implementing <code>ports.WDLRepository</code></p> </li> <li>File system traversal</li> <li>ANTLR-based parsing</li> <li> <p>JSON cache persistence</p> </li> <li> <p><code>storage/</code>: File provider for local and GCS paths</p> </li> <li>Implements <code>ports.FileProvider</code> interface</li> <li> <p>Size limits and validation</p> </li> <li> <p><code>session/</code>: SQLite-based session storage for chat history</p> </li> <li>Uses Google ADK session interface</li> <li> <p>Persistent conversation state</p> </li> <li> <p><code>telemetry/</code>: Usage tracking and error reporting</p> </li> <li>Sentry integration for production</li> <li>NoOp implementation for privacy/development</li> </ul>"},{"location":"ARCHITECTURE/#4-interface-layer-internalinterfaces","title":"4. Interface Layer (<code>internal/interfaces/</code>)","text":"<p>Contains adapters for user interaction. This layer depends on the application layer but not on infrastructure.</p> <p>CLI Handlers:</p> <ul> <li><code>submit</code>, <code>metadata</code>, <code>abort</code>, <code>query</code> - Standard workflow operations</li> <li><code>bundle</code> - WDL packaging</li> <li><code>debug</code>, <code>dashboard</code> - Launch TUI applications</li> <li><code>chat</code> - Launch AI chat agent TUI</li> <li><code>config</code> - Configuration management wizard</li> </ul> <p>TUI Applications (Bubble Tea framework):</p> <ul> <li><code>dashboard/</code>: Real-time workflow monitoring</li> <li>Auto-refresh workflow list</li> <li>Keyboard navigation and filtering</li> <li>Status-based color coding</li> <li> <p>Direct debug mode launch</p> </li> <li> <p><code>debug/</code>: Interactive debug explorer</p> </li> <li>Tree navigation of workflow calls</li> <li>Call details with inputs/outputs</li> <li>Failure analysis and logs display</li> <li> <p>Timeline visualization</p> </li> <li> <p><code>chat/</code>: AI chat interface</p> </li> <li>Message streaming</li> <li>Session persistence</li> <li>Markdown rendering</li> <li> <p>Copy-to-clipboard support</p> </li> <li> <p><code>configwizard/</code>: Interactive configuration setup</p> </li> <li>Directory picker</li> <li>Provider selection</li> <li>Validation and testing</li> </ul> <p>Presenters:</p> <ul> <li><code>cli/presenter/</code>: Format data for CLI output (JSON, table, plain text)</li> </ul>"},{"location":"ARCHITECTURE/#5-configuration-internalconfig","title":"5. Configuration (<code>internal/config/</code>)","text":"<p>Centralized configuration management with file persistence and environment variable support.</p> <p>Config Fields: - Cromwell host and timeout - LLM provider settings (Gemini, Vertex, Ollama) - WDL directory and index path - Session database path - Telemetry toggle - Client ID for anonymous tracking</p>"},{"location":"ARCHITECTURE/#6-dependency-injection-internalcontainer","title":"6. Dependency Injection (<code>internal/container/</code>)","text":"<p>The container wires all dependencies together following the dependency inversion principle.</p> <p>Container Responsibilities: - Initialize infrastructure clients (Cromwell, Telemetry) - Create use cases with injected repositories - Build handlers with use cases and presenters - Provide singleton instances for the application lifecycle</p>"},{"location":"ARCHITECTURE/#dependency-flow","title":"Dependency Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Interface Layer                      \u2502\n\u2502  (CLI Handlers, TUI Applications, Presenters)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                 Application Layer                     \u2502\n\u2502           (Use Cases - Business Logic)                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Domain Layer                        \u2502\n\u2502      (Entities, Interfaces, Business Rules)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b2\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                   \u2502\n                   \u2502 implements interfaces\n                   \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Infrastructure Layer                     \u2502\n\u2502    (Cromwell Client, LLM Providers, Storage, etc)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n          Container (wires everything together)\n</code></pre> <p>Key Principles: - Dependencies point inward (toward domain) - Domain has zero external dependencies - Infrastructure implements domain interfaces - Interface layer depends only on application layer</p>"},{"location":"ARCHITECTURE/#key-design-patterns","title":"Key Design Patterns","text":""},{"location":"ARCHITECTURE/#1-ports-adapters-hexagonal-architecture","title":"1. Ports &amp; Adapters (Hexagonal Architecture)","text":"<p>Domain defines port interfaces in <code>domain/ports/</code>, implemented by adapters in <code>infrastructure/</code>. This inverts dependencies and allows business logic to remain independent of technical details.</p>"},{"location":"ARCHITECTURE/#2-use-case-pattern","title":"2. Use Case Pattern","text":"<p>Each business operation is encapsulated in a use case with: - Clear input/output DTOs - Single responsibility - No framework dependencies</p>"},{"location":"ARCHITECTURE/#3-dependency-injection","title":"3. Dependency Injection","text":"<p>The <code>container.Container</code> manages object lifecycle and dependency wiring using constructor injection.</p>"},{"location":"ARCHITECTURE/#4-factory-pattern","title":"4. Factory Pattern","text":"<ul> <li><code>llm.NewLLM()</code> creates appropriate LLM provider based on configuration</li> <li><code>tools.GetAllTools()</code> builds tool registry from available components</li> </ul>"},{"location":"ARCHITECTURE/#5-strategy-pattern","title":"5. Strategy Pattern","text":"<p>Different LLM providers implement a common interface, allowing runtime provider selection.</p>"},{"location":"ARCHITECTURE/#6-adapter-pattern","title":"6. Adapter Pattern","text":"<p>Infrastructure adapters translate between external APIs and domain interfaces.</p>"},{"location":"ARCHITECTURE/#testing-strategy","title":"Testing Strategy","text":"<ul> <li>Domain Layer: Pure unit tests with no mocks</li> <li>Application Layer: Test use cases with mock repositories</li> <li>Infrastructure Layer: Integration tests with test servers/fixtures</li> <li>Interface Layer: UI component tests with mock use cases</li> </ul>"},{"location":"ARCHITECTURE/#known-architecture-considerations","title":"Known Architecture Considerations","text":""},{"location":"ARCHITECTURE/#current-simplifications","title":"Current Simplifications","text":"<ol> <li>debuginfo package contains both parsing and tree building logic</li> <li>Reason: Tree building is tightly coupled to metadata structure and not reused elsewhere</li> <li>Impact: Slightly mixed responsibilities, but isolated to one package</li> </ol>"},{"location":"ARCHITECTURE/#design-decisions","title":"Design Decisions","text":"<ul> <li> <p>Centralized Ports Package: All port interfaces are defined in <code>domain/ports/</code> following Hexagonal Architecture. This makes it easy to see all external dependencies and maintains a clear boundary between domain and infrastructure.</p> </li> <li> <p>Unified WorkflowRepository: Single comprehensive interface for all workflow operations (execution, metadata, health, labels, costs). This eliminates interface redundancy and provides a complete contract for workflow management. Both CLI use cases and TUI handlers use the same port.</p> </li> <li> <p>FileProvider abstraction: Single interface (<code>ports.FileProvider</code>) for file access, allowing implementations for local files, GCS, S3, or any other storage backend. Application layer depends only on the port.</p> </li> <li> <p>WDLRepository: Dedicated port for WDL indexing operations, separating concerns between workflow execution (Cromwell) and workflow discovery (WDL index).</p> </li> <li> <p>Chat agent tools in infrastructure: Tools are adapters to external services (Cromwell API, GCS, WDL files), implementing domain ports where appropriate.</p> </li> <li> <p>Session management: Delegates to Google ADK interfaces for compatibility with future storage backends.</p> </li> <li> <p>Telemetry service: Interface-based design allows NoOp implementation for privacy and development.</p> </li> </ul>"},{"location":"ARCHITECTURE/#cicd-pipeline","title":"CI/CD Pipeline","text":"<p>The project uses GitHub Actions for continuous integration and releases:</p>"},{"location":"ARCHITECTURE/#workflows","title":"Workflows","text":"<ul> <li><code>ci.yml</code>: Runs on PRs and pushes to <code>main</code></li> <li>Go linting and formatting checks</li> <li>Unit and integration tests with coverage</li> <li>Build verification for multiple platforms</li> <li> <p>Uploads coverage and build artifacts</p> </li> <li> <p><code>release.yml</code>: Triggered on version tags (<code>v*</code>)</p> </li> <li>Runs full test suite</li> <li>Uses GoReleaser to build multi-platform binaries</li> <li>Creates GitHub releases with signed artifacts</li> <li>Publishes binaries for Linux, macOS, Windows (amd64, arm64)</li> </ul>"},{"location":"ARCHITECTURE/#release-process","title":"Release Process","text":"<ol> <li>Tag a new version: <code>git tag v1.2.3 &amp;&amp; git push origin v1.2.3</code></li> <li>GitHub Actions builds and tests</li> <li>GoReleaser creates release with artifacts</li> <li>Users download from GitHub Releases or use <code>install.sh</code> script</li> </ol>"},{"location":"ARCHITECTURE/#external-dependencies","title":"External Dependencies","text":""},{"location":"ARCHITECTURE/#core-libraries","title":"Core Libraries","text":"<ul> <li><code>urfave/cli/v2</code>: CLI framework and command routing</li> <li><code>charmbracelet/bubbletea</code>: TUI framework (Elm architecture)</li> <li><code>charmbracelet/lipgloss</code>: TUI styling and layout</li> <li><code>antlr4</code>: WDL parsing (via generated parser)</li> </ul>"},{"location":"ARCHITECTURE/#cloud-ai","title":"Cloud &amp; AI","text":"<ul> <li><code>google.golang.org/genai</code>: Gemini API client</li> <li><code>cloud.google.com/go/vertexai</code>: Vertex AI client</li> <li><code>cloud.google.com/go/storage</code>: GCS file access</li> <li>Ollama: Local LLM via HTTP API</li> </ul>"},{"location":"ARCHITECTURE/#infrastructure","title":"Infrastructure","text":"<ul> <li><code>getsentry/sentry-go</code>: Error tracking and telemetry</li> <li><code>google.golang.org/adk</code>: Agent Development Kit (sessions, tools)</li> <li><code>mattn/go-sqlite3</code>: Session storage</li> </ul> <p>Last Updated: 2025-12-26 Document Version: 2.1 Project Version: See releases</p>"},{"location":"TUI_GUIDE/","title":"Pumbaa TUI - Reference Guide","text":"<p>This document describes the architecture and structure of the Pumbaa Terminal User Interface (TUI), a CLI tool for managing Cromwell workflows.</p>"},{"location":"TUI_GUIDE/#overview","title":"Overview","text":"<p>The TUI is built using the Bubble Tea framework, following the Model-View-Update (MVU) pattern inspired by Elm. Styling is done with Lipgloss.</p>"},{"location":"TUI_GUIDE/#directory-structure","title":"Directory Structure","text":"<pre><code>internal/interfaces/tui/\n\u251c\u2500\u2500 app.go                    # Main coordinator (screen navigation)\n\u251c\u2500\u2500 common/                   # Shared components\n\u2502   \u251c\u2500\u2500 colors.go             # Color palette\n\u2502   \u251c\u2500\u2500 keys.go               # Global key bindings\n\u2502   \u2514\u2500\u2500 styles.go             # Reusable Lipgloss styles\n\u251c\u2500\u2500 dashboard/                # Workflow listing screen (12 files)\n\u2502   \u251c\u2500\u2500 model.go              # Main model, Init, Update\n\u2502   \u251c\u2500\u2500 messages.go           # tea.Msg message types\n\u2502   \u251c\u2500\u2500 types.go              # KeyMap, FilterState\n\u2502   \u251c\u2500\u2500 helpers.go            # Utility functions\n\u2502   \u251c\u2500\u2500 update_keys.go        # Keyboard handlers\n\u2502   \u251c\u2500\u2500 update_async.go       # Async operations\n\u2502   \u251c\u2500\u2500 update_scroll.go      # Navigation/scroll\n\u2502   \u251c\u2500\u2500 view.go               # Main view router\n\u2502   \u251c\u2500\u2500 view_header.go        # Header with badges\n\u2502   \u251c\u2500\u2500 view_content.go       # Content area\n\u2502   \u251c\u2500\u2500 view_table.go         # Workflows table\n\u2502   \u2514\u2500\u2500 view_footer.go        # Help bar\n\u2514\u2500\u2500 debug/                    # Workflow debug screen (21 files)\n    \u251c\u2500\u2500 model.go              # Main model\n    \u251c\u2500\u2500 types.go              # Enums and type aliases\n    \u251c\u2500\u2500 keys.go               # Specific key bindings\n    \u251c\u2500\u2500 styles.go             # Specific styles\n    \u251c\u2500\u2500 helpers.go            # Helper functions\n    \u251c\u2500\u2500 view.go               # View router\n    \u251c\u2500\u2500 view_header.go        # Header with metadata\n    \u251c\u2500\u2500 view_tree.go          # Calls tree\n    \u251c\u2500\u2500 view_details.go       # Details panel\n    \u251c\u2500\u2500 view_footer.go        # Status bar\n    \u251c\u2500\u2500 view_failures.go      # Failures list\n    \u251c\u2500\u2500 update.go             # Main update\n    \u251c\u2500\u2500 update_async.go       # Async operations\n    \u251c\u2500\u2500 update_modals.go      # Modal handlers\n    \u251c\u2500\u2500 update_navigation.go  # Tree navigation\n    \u251c\u2500\u2500 modals.go             # Modal rendering\n    \u251c\u2500\u2500 modal_logs.go         # Logs modal\n    \u251c\u2500\u2500 modal_call.go         # Call details modal\n    \u251c\u2500\u2500 modal_workflow.go     # Inputs/outputs modal\n    \u251c\u2500\u2500 modal_timeline.go     # Global timeline modal\n    \u2514\u2500\u2500 parser_test.go        # Parser tests\n</code></pre>"},{"location":"TUI_GUIDE/#architecture","title":"Architecture","text":""},{"location":"TUI_GUIDE/#model-view-update-mvu-pattern","title":"Model-View-Update (MVU) Pattern","text":"<p>Each screen follows the Bubble Tea pattern:</p> <pre><code>type Model struct {\n    // Application state\n}\n\nfunc (m Model) Init() tea.Cmd {\n    // Initial command (data fetch, etc)\n}\n\nfunc (m Model) Update(msg tea.Msg) (tea.Model, tea.Cmd) {\n    // Update state based on messages\n}\n\nfunc (m Model) View() string {\n    // Render the interface\n}\n</code></pre>"},{"location":"TUI_GUIDE/#screen-coordination-appgo","title":"Screen Coordination (app.go)","text":"<p>The <code>AppModel</code> coordinates navigation between screens:</p> <pre><code>type Screen int\n\nconst (\n    ScreenDashboard Screen = iota\n    ScreenDebug\n)\n\ntype AppModel struct {\n    currentScreen Screen\n    dashboard     dashboard.Model\n    debug         debug.Model\n    // ...\n}\n</code></pre>"},{"location":"TUI_GUIDE/#message-flow","title":"Message Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     tea.Program                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502  \u2502  Event   \u2502\u2500\u2500\u2500\u25b6\u2502  Update  \u2502\u2500\u2500\u2500\u25b6\u2502   View   \u2502           \u2502\n\u2502  \u2502 (KeyMsg) \u2502    \u2502 (Model)  \u2502    \u2502 (string) \u2502           \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502       \u2502               \u2502               \u2502                  \u2502\n\u2502       \u2502               \u25bc               \u25bc                  \u2502\n\u2502       \u2502         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502       \u2502         \u2502   Cmd    \u2502    \u2502 Terminal \u2502           \u2502\n\u2502       \u2502         \u2502 (async)  \u2502    \u2502  Output  \u2502           \u2502\n\u2502       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502                                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"TUI_GUIDE/#shared-components-common","title":"Shared Components (common/)","text":""},{"location":"TUI_GUIDE/#colors-colorsgo","title":"Colors (colors.go)","text":"<pre><code>// Status colors\nvar (\n    StatusSucceeded = lipgloss.Color(\"#00ff00\")  // Green\n    StatusFailed    = lipgloss.Color(\"#ff0000\")  // Red\n    StatusRunning   = lipgloss.Color(\"#ffff00\")  // Yellow\n    StatusPending   = lipgloss.Color(\"#888888\")  // Gray\n)\n\n// UI colors\nvar (\n    PrimaryColor   = lipgloss.Color(\"#7D56F4\")  // Main purple\n    BorderColor    = lipgloss.Color(\"#444444\")  // Borders\n    TextColor      = lipgloss.Color(\"#FAFAFA\")  // Text\n    MutedColor     = lipgloss.Color(\"#888888\")  // Secondary text\n    HighlightColor = lipgloss.Color(\"#874BFD\")  // Selection\n)\n</code></pre>"},{"location":"TUI_GUIDE/#key-bindings-keysgo","title":"Key Bindings (keys.go)","text":"<pre><code>// Standard navigation (vim-style + arrows)\ntype NavigationKeys struct {\n    Up, Down, Left, Right key.Binding  // \u2191\u2193\u2190\u2192 or hjkl\n    Enter, Space, Tab, Escape key.Binding\n    Home, End key.Binding              // g/G or Home/End\n    PageUp, PageDown key.Binding       // PgUp/PgDn or Ctrl+U/D\n}\n\n// Global keys (work on any screen)\ntype GlobalKeys struct {\n    Quit key.Binding  // q or Ctrl+C\n    Help key.Binding  // ?\n}\n</code></pre>"},{"location":"TUI_GUIDE/#styles-stylesgo","title":"Styles (styles.go)","text":"<p>Reusable styles for visual consistency:</p> Style Usage <code>PanelStyle</code> Panels with rounded border <code>FocusedPanelStyle</code> Focused panel (highlighted border) <code>TitleStyle</code> Bold titles <code>MutedStyle</code> Secondary/disabled text <code>ErrorStyle</code> Error messages <code>SuccessStyle</code> Success messages <code>ModalStyle</code> Modal windows <code>HeaderStyle</code> Screen headers <code>HelpBarStyle</code> Bottom help bar <code>KeyStyle</code> Shortcut keys <code>DescStyle</code> Shortcut descriptions <code>BadgeStyle</code> Status badges"},{"location":"TUI_GUIDE/#dashboard","title":"Dashboard","text":""},{"location":"TUI_GUIDE/#features","title":"Features","text":"<ul> <li>Workflow listing with status, ID, name, date and labels</li> <li>Filters: by name (<code>/</code>), label (<code>l</code>), status (<code>s</code>)</li> <li>Actions: refresh (<code>r</code>), abort (<code>a</code>), debug (<code>enter</code>)</li> <li>Scroll: navigation with arrows, Page Up/Down</li> </ul>"},{"location":"TUI_GUIDE/#file-structure","title":"File Structure","text":"File Responsibility Lines <code>model.go</code> Model, Init, main Update ~196 <code>messages.go</code> Message types ~36 <code>types.go</code> KeyMap, FilterState ~61 <code>helpers.go</code> truncateID, formatDuration, etc ~91 <code>update_keys.go</code> handleMainKeys, handleFilterKeys ~175 <code>update_async.go</code> fetchWorkflows, abortWorkflow ~87 <code>update_scroll.go</code> ensureVisible, getVisibleRows ~17 <code>view.go</code> View() router ~22 <code>view_header.go</code> renderHeader ~94 <code>view_content.go</code> renderContent, modals ~109 <code>view_table.go</code> renderTable, renderRow ~142 <code>view_footer.go</code> renderFooter (help bar) ~83"},{"location":"TUI_GUIDE/#main-model","title":"Main Model","text":"<pre><code>type Model struct {\n    // Data\n    workflows    []workflow.Workflow\n    totalCount   int\n\n    // UI state\n    cursor       int\n    scrollY      int\n    width, height int\n\n    // Filters\n    activeFilters FilterState\n    showFilter    bool\n    filterInput   textinput.Model\n    filterType    string  // \"name\" or \"label\"\n\n    // Modals\n    showConfirm   bool\n    confirmID     string\n\n    // Loading\n    loading       bool\n    loadingDebug  bool\n    loadingDebugID string\n\n    // Fetchers (interfaces)\n    fetcher         WorkflowFetcher\n    metadataFetcher MetadataFetcher\n}\n</code></pre>"},{"location":"TUI_GUIDE/#messages","title":"Messages","text":"<pre><code>type workflowsLoadedMsg struct {\n    workflows  []workflow.Workflow\n    totalCount int\n}\n\ntype workflowsErrorMsg struct{ error }\ntype abortResultMsg struct{ success bool; message string }\ntype debugMetadataLoadedMsg struct{ metadata *debug.WorkflowMetadata }\ntype debugMetadataErrorMsg struct{ error }\ntype NavigateToDebugMsg struct{ Metadata *debug.WorkflowMetadata }\n</code></pre>"},{"location":"TUI_GUIDE/#dashboard-key-bindings","title":"Dashboard Key Bindings","text":"Key Action <code>\u2191/k</code> Move up <code>\u2193/j</code> Move down <code>enter</code> Open debug view <code>r</code> Refresh <code>a</code> Abort workflow <code>/</code> Filter by name <code>l</code> Filter by label <code>s</code> Cycle status filter <code>ctrl+x</code> Clear filters <code>q</code> Quit"},{"location":"TUI_GUIDE/#debug-view","title":"Debug View","text":""},{"location":"TUI_GUIDE/#features_1","title":"Features","text":"<ul> <li>Hierarchical tree of calls and subworkflows</li> <li>Execution details (timing, resources, status)</li> <li>Modals: logs, inputs/outputs, command, timeline</li> <li>Navigation: expand/collapse nodes, focus between panels</li> </ul>"},{"location":"TUI_GUIDE/#file-structure_1","title":"File Structure","text":"Category Files Total Lines Core model.go, types.go, keys.go ~356 Views view*.go (6 files) ~843 Updates update*.go (4 files) ~783 Modals modal*.go (4 files) ~703 Helpers helpers.go, styles.go ~628"},{"location":"TUI_GUIDE/#main-model_1","title":"Main Model","text":"<pre><code>type Model struct {\n    // Data\n    metadata *WorkflowMetadata\n    tree     *TreeNode\n    nodes    []*TreeNode\n\n    // Fetcher for on-demand subworkflows\n    fetcher MetadataFetcher\n\n    // UI state\n    cursor       int\n    focus        PanelFocus  // FocusTree or FocusDetails\n    viewMode     ViewMode\n    width, height int\n    treeWidth, detailsWidth int\n\n    // Loading\n    isLoading      bool\n    loadingMessage string\n    loadingSpinner spinner.Model\n\n    // Modals (each has its own viewport)\n    showLogModal, showInputsModal, showOutputsModal bool\n    showCallInputsModal, showCallOutputsModal bool\n    showGlobalTimelineModal bool\n    // ... viewports for each modal\n\n    // Components\n    keys           KeyMap\n    help           help.Model\n    detailViewport viewport.Model\n}\n</code></pre>"},{"location":"TUI_GUIDE/#viewmode-e-panelfocus","title":"ViewMode e PanelFocus","text":"<pre><code>type ViewMode int\nconst (\n    ViewModeTree ViewMode = iota\n    ViewModeDetails\n    ViewModeCommand\n    ViewModeLogs\n    ViewModeInputs\n    ViewModeOutputs\n    ViewModeHelp\n)\n\ntype PanelFocus int\nconst (\n    FocusTree PanelFocus = iota\n    FocusDetails\n)\n</code></pre>"},{"location":"TUI_GUIDE/#debug-key-bindings","title":"Debug Key Bindings","text":"Key Action <code>\u2191/k</code> Navigate up <code>\u2193/j</code> Navigate down <code>enter/\u2192</code> Expand node <code>\u2190/h</code> Collapse node <code>tab</code> Toggle tree/details focus <code>L</code> View logs (stdout/stderr) <code>i</code> View workflow inputs <code>o</code> View workflow outputs <code>I</code> View call inputs <code>O</code> View call outputs <code>c</code> View call command <code>t</code> View global timeline <code>?</code> Help <code>esc</code> Close modal/back <code>q</code> Quit"},{"location":"TUI_GUIDE/#screen-layout","title":"Screen Layout","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \ud83d\udd0d Workflow Debug - MyWorkflow                    \u23f1 5m 32s \u2502\n\u2502 \u25cf Succeeded  \ud83d\udcca 10 calls  \u26a0 0 failures                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u25bc MyWorkflow (Succeeded)     \u2502 Call Details                \u2502\n\u2502   \u251c\u2500 task1 (Succeeded)       \u2502                             \u2502\n\u2502   \u2502  \u2514\u2500 shard-0 (Succeeded)  \u2502 Status: \u25cf Succeeded         \u2502\n\u2502   \u2502  \u2514\u2500 shard-1 (Succeeded)  \u2502 Duration: 2m 15s            \u2502\n\u2502   \u251c\u2500 task2 (Succeeded)       \u2502 Machine: n1-standard-4      \u2502\n\u2502   \u2514\u2500 task3 (Running)         \u2502 Preemptible: Yes (2 tries)  \u2502\n\u2502      \u2514\u2500 shard-0 (Running)    \u2502                             \u2502\n\u2502                              \u2502 Inputs:                     \u2502\n\u2502                              \u2502   file1: gs://bucket/...    \u2502\n\u2502                              \u2502   param: 42                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u2191\u2193 navigate  enter expand  tab switch  L logs  ? help  q   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"TUI_GUIDE/#code-patterns","title":"Code Patterns","text":""},{"location":"TUI_GUIDE/#naming-conventions","title":"Naming Conventions","text":"Padr\u00e3o Exemplo Uso <code>render*</code> <code>renderHeader()</code> Rendering functions <code>handle*Keys</code> <code>handleMainKeys()</code> Keyboard handlers <code>*Msg</code> <code>workflowsLoadedMsg</code> Message types <code>view_*.go</code> <code>view_header.go</code> View files <code>update_*.go</code> <code>update_keys.go</code> Update files <code>modal_*.go</code> <code>modal_logs.go</code> Modal files"},{"location":"TUI_GUIDE/#estrutura-de-arquivo-view","title":"Estrutura de Arquivo View","text":"<pre><code>package dashboard\n\nimport (...)\n\n// Related rendering functions\nfunc (m Model) renderX() string {\n    // Uses lipgloss for styling\n    return lipgloss.JoinVertical(...)\n}\n</code></pre>"},{"location":"TUI_GUIDE/#estrutura-de-arquivo-update","title":"Estrutura de Arquivo Update","text":"<pre><code>package dashboard\n\nimport (...)\n\n// Handlers for a specific category\nfunc (m Model) handleXKeys(msg tea.KeyMsg) (Model, tea.Cmd) {\n    switch {\n    case key.Matches(msg, m.keys.SomeKey):\n        // Update state\n        return m, someCmd\n    }\n    return m, nil\n}\n</code></pre>"},{"location":"TUI_GUIDE/#operacoes-assincronas","title":"Opera\u00e7\u00f5es Ass\u00edncronas","text":"<pre><code>// Command that returns a message\nfunc (m Model) fetchData() tea.Cmd {\n    return func() tea.Msg {\n        data, err := m.fetcher.GetData(context.Background())\n        if err != nil {\n            return errorMsg{err}\n        }\n        return dataLoadedMsg{data}\n    }\n}\n\n// In Update, handle the message\nfunc (m Model) Update(msg tea.Msg) (tea.Model, tea.Cmd) {\n    switch msg := msg.(type) {\n    case dataLoadedMsg:\n        m.data = msg.data\n        return m, nil\n    case errorMsg:\n        m.error = msg.Error()\n        return m, nil\n    }\n    return m, nil\n}\n</code></pre>"},{"location":"TUI_GUIDE/#extensibility","title":"Extensibility","text":""},{"location":"TUI_GUIDE/#adding-a-new-screen","title":"Adding a New Screen","text":"<ol> <li>Create a directory in <code>internal/interfaces/tui/new_screen/</code></li> <li>Implement <code>Model</code>, <code>Init()</code>, <code>Update()</code>, <code>View()</code></li> <li>Add a constant in <code>app.go</code>:    <pre><code>const (\n    ScreenDashboard Screen = iota\n    ScreenDebug\n    ScreenNovaTela  // novo\n)\n</code></pre></li> <li>Add a field to <code>AppModel</code> and cases in <code>Update</code>/<code>View</code></li> </ol>"},{"location":"TUI_GUIDE/#adding-a-new-modal","title":"Adding a New Modal","text":"<ol> <li>Create <code>modal_name.go</code> with function <code>renderNameModal()</code></li> <li>Add state to the Model:    <pre><code>showNomeModal    bool\nnomeModalViewport viewport.Model\n</code></pre></li> <li>Add check in <code>View()</code>:    <pre><code>if m.showNomeModal {\n    return m.renderNomeModal()\n}\n</code></pre></li> <li>Add key binding and handler</li> </ol>"},{"location":"TUI_GUIDE/#adding-a-new-view-component","title":"Adding a New View Component","text":"<ol> <li>Create <code>view_component.go</code></li> <li>Implement <code>render*()</code> method</li> <li>Integrate into main <code>View()</code> or composition</li> </ol>"},{"location":"TUI_GUIDE/#tests","title":"Tests","text":"<p>The TUI tests focus mainly on parsing and data transformation logic:</p> <pre><code>// debug/parser_test.go\nfunc TestParseMetadata(t *testing.T) {\n    // Tests conversion from JSON to internal structures\n}\n</code></pre> <p>For visual tests, use the TUI with test data:</p> <pre><code># Dashboard with mock\npumbaa dashboard --mock\n\n# Debug with metadata file\npumbaa debug test_data/metadata.json\n</code></pre>"},{"location":"TUI_GUIDE/#referencias","title":"Refer\u00eancias","text":"<ul> <li>Bubble Tea - Framework TUI</li> <li>Lipgloss - Styling</li> <li>Bubbles - Components (spinner, viewport, textinput)</li> <li>The Elm Architecture - Padr\u00e3o MVU</li> </ul> <p>Last updated: December 2025</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Thank you for your interest in contributing to Pumbaa! </p>"},{"location":"contributing/#development-setup","title":"Development Setup","text":""},{"location":"contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Go 1.21+</li> <li>Make</li> </ul>"},{"location":"contributing/#build","title":"Build","text":"<pre><code>git clone https://github.com/lmtani/pumbaa\ncd pumbaa\nmake build\n</code></pre> <p>Binary Location</p> <p><code>./dist/pumbaa</code></p>"},{"location":"contributing/#run","title":"Run","text":"<pre><code>./dist/pumbaa --help\n</code></pre>"},{"location":"contributing/#testing","title":"Testing","text":"<pre><code>make test\n</code></pre>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>pumbaa/\n\u251c\u2500\u2500 cmd/cli/            # CLI entry point\n\u251c\u2500\u2500 internal/\n\u2502   \u251c\u2500\u2500 application/    # Use cases\n\u2502   \u251c\u2500\u2500 container/      # Dependency injection\n\u2502   \u251c\u2500\u2500 domain/         # Domain entities\n\u2502   \u251c\u2500\u2500 infrastructure/ # External integrations (Cromwell, LLM, etc.)\n\u2502   \u2514\u2500\u2500 interfaces/     # CLI &amp; TUI handlers\n\u2514\u2500\u2500 pkg/wdl/            # WDL parser (ANTLR)\n</code></pre>"},{"location":"contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li> Fork the repository</li> <li> Create a feature branch</li> <li> Make your changes</li> <li> Run tests: <code>make test</code></li> <li> Submit PR</li> </ol>"},{"location":"contributing/#reporting-bugs","title":"Reporting Bugs","text":"<p>Found a bug?  Open an issue</p> <p>Please include:</p> <ul> <li>A clear, descriptive title</li> <li>Steps to reproduce the issue</li> <li>Expected vs actual behavior</li> <li>Your environment (OS, Cromwell version, pumbaa version)</li> <li>Relevant logs or error messages</li> </ul>"},{"location":"contributing/#requesting-features","title":"Requesting Features","text":"<p>Have an idea?  Open a feature request</p> <p>Please include:</p> <ul> <li>A clear description of the feature</li> <li>Why it would be useful</li> <li>Any examples or mockups if applicable</li> </ul> <p>All contributions welcome!</p> <p>All contributions and feedback are welcome! Please ensure issues include enough details for us to investigate or implement your request.</p>"},{"location":"testing-guidelines/","title":"Testing Guidelines","text":"<p>This document outlines testing conventions and best practices for the Pumbaa project.</p>"},{"location":"testing-guidelines/#project-structure","title":"Project Structure","text":"<p>Tests are placed alongside the code they test, following Go conventions:</p> <pre><code>internal/\n\u251c\u2500\u2500 domain/workflow/\n\u2502   \u251c\u2500\u2500 entity.go\n\u2502   \u251c\u2500\u2500 entity_test.go\n\u2502   \u251c\u2500\u2500 preemption.go\n\u2502   \u251c\u2500\u2500 preemption_test.go\n\u2502   \u251c\u2500\u2500 monitoring.go\n\u2502   \u2514\u2500\u2500 monitoring_test.go\n\u251c\u2500\u2500 application/workflow/\n\u2502   \u2514\u2500\u2500 debuginfo/\n\u2502       \u251c\u2500\u2500 usecase.go\n\u2502       \u2514\u2500\u2500 usecase_test.go\n\u2514\u2500\u2500 infrastructure/cromwell/\n    \u251c\u2500\u2500 mapper.go\n    \u2514\u2500\u2500 mapper_test.go\n</code></pre>"},{"location":"testing-guidelines/#test-categories-by-layer","title":"Test Categories by Layer","text":"Layer Test Type Dependencies Purpose Domain Unit None Pure business logic Application Unit/Integration Mocked infrastructure Use case orchestration Infrastructure Integration External systems or mocks API clients, parsers Interfaces E2E (optional) Full stack CLI, TUI validation"},{"location":"testing-guidelines/#conventions","title":"Conventions","text":""},{"location":"testing-guidelines/#naming","title":"Naming","text":"<ul> <li>Test files: <code>*_test.go</code> in the same package</li> <li>Test functions: <code>TestFunctionName</code> or <code>TestTypeName_MethodName</code></li> <li>Subtests: Use descriptive names with <code>t.Run(\"description\", ...)</code></li> </ul>"},{"location":"testing-guidelines/#table-driven-tests","title":"Table-Driven Tests","text":"<p>Prefer table-driven tests for multiple scenarios:</p> <pre><code>func TestCalculatePreemptionSummary(t *testing.T) {\n    tests := []struct {\n        name     string\n        workflow *Workflow\n        want     *PreemptionSummary\n    }{\n        {\n            name:     \"empty workflow\",\n            workflow: &amp;Workflow{},\n            want:     &amp;PreemptionSummary{CostEfficiency: 1.0},\n        },\n        {\n            name:     \"workflow with preemptions\",\n            workflow: createTestWorkflow(3, 2), // 3 tasks, 2 preempted\n            want:     &amp;PreemptionSummary{TotalPreemptions: 2},\n        },\n    }\n\n    for _, tt := range tests {\n        t.Run(tt.name, func(t *testing.T) {\n            got := tt.workflow.CalculatePreemptionSummary()\n            // assertions\n        })\n    }\n}\n</code></pre>"},{"location":"testing-guidelines/#test-data","title":"Test Data","text":"<p>Place test fixtures in <code>test_data/</code>:</p> <pre><code>test_data/\n\u251c\u2500\u2500 metadata.json           # Cromwell workflow metadata\n\u251c\u2500\u2500 metadata_scattered.json # Scattered workflow example\n\u251c\u2500\u2500 monitoring.tsv          # Resource monitoring output\n\u2514\u2500\u2500 monitoring_empty.tsv    # Edge case: empty log\n</code></pre> <p>Load test data with relative paths:</p> <pre><code>data, err := os.ReadFile(\"../../test_data/metadata.json\")\n</code></pre>"},{"location":"testing-guidelines/#assertions","title":"Assertions","text":"<p>Use standard library comparisons. For complex structs, consider:</p> <pre><code>if got.TotalTasks != want.TotalTasks {\n    t.Errorf(\"TotalTasks = %d, want %d\", got.TotalTasks, want.TotalTasks)\n}\n</code></pre> <p>For deep equality with large structs:</p> <pre><code>import \"reflect\"\n\nif !reflect.DeepEqual(got, want) {\n    t.Errorf(\"got %+v, want %+v\", got, want)\n}\n</code></pre>"},{"location":"testing-guidelines/#test-helpers","title":"Test Helpers","text":"<p>Create helper functions for common setup:</p> <pre><code>// createTestCall creates a Call with the given parameters for testing.\nfunc createTestCall(name string, attempt int, preemptible bool) Call {\n    preemptStr := \"false\"\n    if preemptible {\n        preemptStr = \"3\" // 3 preemptible attempts\n    }\n    return Call{\n        Name:        name,\n        Attempt:     attempt,\n        Preemptible: preemptStr,\n        Status:      StatusSucceeded,\n    }\n}\n</code></pre>"},{"location":"testing-guidelines/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\ngo test ./...\n\n# Run tests with verbose output\ngo test -v ./...\n\n# Run specific package tests\ngo test ./internal/domain/workflow/...\n\n# Run with coverage\ngo test -cover ./...\n\n# Generate coverage report\ngo test -coverprofile=coverage.out ./...\ngo tool cover -html=coverage.out\n</code></pre>"},{"location":"testing-guidelines/#test-coverage-goals","title":"Test Coverage Goals","text":"Layer Target Coverage Domain 80%+ (critical business logic) Application 70%+ Infrastructure 60%+"},{"location":"testing-guidelines/#mocking","title":"Mocking","text":"<p>For infrastructure dependencies, create interfaces and mock implementations:</p> <pre><code>// In domain/ports/workflow.go\ntype WorkflowRepository interface {\n    GetMetadata(ctx context.Context, id string) (*workflow.Workflow, error)\n}\n\n// In tests\ntype mockRepository struct {\n    metadata *workflow.Workflow\n    err      error\n}\n\nfunc (m *mockRepository) GetMetadata(ctx context.Context, id string) (*workflow.Workflow, error) {\n    return m.metadata, m.err\n}\n</code></pre>"},{"location":"testing-guidelines/#edge-cases-to-test","title":"Edge Cases to Test","text":"<ol> <li>Empty inputs: Empty slices, nil pointers, empty strings</li> <li>Boundary conditions: Zero, one, many items</li> <li>Error conditions: Invalid input, parsing failures</li> <li>Unicode/special characters: In workflow names, labels</li> <li>Time zones: Timestamp parsing with different formats</li> </ol>"},{"location":"features/abort/","title":"Abort Workflows","text":"<p>Stop running workflows.</p> <ul> <li> <p> Immediate Stop</p> <p>Terminate running tasks immediately</p> </li> <li> <p> TUI Support</p> <p>Abort from Dashboard with confirmation</p> </li> </ul> <p>Irreversible</p> <p>Aborting a workflow cannot be undone.</p>"},{"location":"features/abort/#quick-start","title":"Quick Start","text":"<pre><code>pumbaa workflow abort &lt;workflow-id&gt;\n</code></pre>"},{"location":"features/abort/#example","title":"Example","text":"<pre><code>pumbaa workflow abort abc12345-6789-0def-ghij-klmnopqrstuv\n</code></pre>"},{"location":"features/abort/#behavior","title":"Behavior","text":"Action Description  Stop tasks Running tasks are terminated  Status change <code>Running</code> \u2192 <code>Aborting</code> \u2192 <code>Aborted</code>  Intermediate files Not cleaned up"},{"location":"features/abort/#from-dashboard","title":"From Dashboard","text":"<ol> <li>Navigate to workflow with Up / Down</li> <li>Press A</li> <li>Confirm action</li> </ol>"},{"location":"features/abort/#see-also","title":"See Also","text":"<ul> <li> Dashboard</li> <li> Query</li> </ul>"},{"location":"features/bundle/","title":"Bundle Creation","text":"<p>Package WDL workflows with dependencies into ZIP files.</p> <ul> <li> <p> Auto-Detection</p> <p>Automatically finds all imported WDL files</p> </li> <li> <p> Single File</p> <p>Creates a portable ZIP for submission</p> </li> <li> <p> Import Resolution</p> <p>Resolves nested import paths</p> </li> </ul>"},{"location":"features/bundle/#quick-start","title":"Quick Start","text":"<pre><code>pumbaa bundle create --workflow FILE --output FILE\n</code></pre>"},{"location":"features/bundle/#flags","title":"Flags","text":"Flag Alias Required Description <code>--workflow</code> <code>-w</code> Main WDL file <code>--output</code> <code>-o</code> Output ZIP path"},{"location":"features/bundle/#how-it-works","title":"How It Works","text":"<pre><code>flowchart LR\n    A[Parse main WDL] --&gt; B[Find imports]\n    B --&gt; C[Resolve paths]\n    C --&gt; D[Package to ZIP]</code></pre> <ol> <li>Parses main WDL file</li> <li>Finds all <code>import</code> statements</li> <li>Resolves import paths</li> <li>Packages all files into ZIP</li> </ol>"},{"location":"features/bundle/#example","title":"Example","text":"<p>Given workflow structure:</p> <pre><code>pipeline.wdl\ntasks/\n  alignment.wdl\n  calling.wdl\n</code></pre> Create BundleSubmit with Bundle <pre><code>pumbaa bundle create \\\n  --workflow pipeline.wdl \\\n  --output bundle.zip\n</code></pre> <pre><code>pumbaa workflow submit \\\n  --workflow pipeline.wdl \\\n  --dependencies bundle.zip\n</code></pre>"},{"location":"features/bundle/#see-also","title":"See Also","text":"<ul> <li> Submit \u2014 Use bundles with submission</li> </ul>"},{"location":"features/chat/","title":"Chat Agent","text":"<p>Interactive AI assistant for querying Cromwell workflows and reading files via natural language.</p> <ul> <li> <p> Natural Language</p> <p>Ask questions about workflows in plain English</p> </li> <li> <p> Built-in Tools</p> <p>Query workflows, read GCS files, check status</p> </li> <li> <p> Session Persistence</p> <p>Resume conversations with context retention</p> </li> </ul>"},{"location":"features/chat/#quick-start","title":"Quick Start","text":"Using Config WizardDirect Start <pre><code>pumbaa config init\n</code></pre> <p>The wizard will guide you through setting up your preferred LLM provider.</p> <pre><code>pumbaa chat\n</code></pre>"},{"location":"features/chat/#llm-providers","title":"LLM Providers","text":"<p>Choose your preferred AI backend:</p>  Gemini API Vertex AI Ollama (Local) <pre><code>pumbaa chat --provider gemini --gemini-api-key &lt;API_KEY&gt;\n</code></pre> <p>Get an API Key</p> <p>Free tier available at Google AI Studio</p> <pre><code>pumbaa chat --provider vertex --vertex-project &lt;PROJECT_ID&gt;\n</code></pre> <p>GCP Project Required</p> <p>Requires an active Google Cloud project with Vertex AI API enabled.</p> <pre><code>pumbaa chat --provider ollama\n</code></pre> <p>Default Option</p> <p>Runs locally, no API key needed. Install from ollama.ai</p>"},{"location":"features/chat/#capabilities","title":"Capabilities","text":"<ul> <li> <p> Query Workflows</p> <p>Search by status, name, or labels</p> </li> <li> <p> Get Status</p> <p>Check execution state in real-time</p> </li> <li> <p> View Metadata</p> <p>Inspect workflow details and call info</p> </li> <li> <p> Get Outputs</p> <p>List workflow output files</p> </li> <li> <p> View Logs</p> <p>Access workflow log paths for debugging</p> </li> <li> <p> Read GCS Files</p> <p>Fetch files from Google Cloud Storage</p> </li> </ul>"},{"location":"features/chat/#controls","title":"Controls","text":"Key Action Ctrl+D Send message Up / Down Scroll messages (input mode) Tab Toggle navigation mode Y Copy selected message Esc Exit chat"},{"location":"features/chat/#session-management","title":"Session Management","text":"<p>Conversations are persisted in SQLite for context retention.</p> <pre><code># List existing sessions\npumbaa chat --list\n\n# Resume a session\npumbaa chat --session &lt;SESSION_ID&gt;\n</code></pre>"},{"location":"features/chat/#configuration","title":"Configuration","text":""},{"location":"features/chat/#environment-variables","title":"Environment Variables","text":"Gemini Ollama Vertex AI <pre><code>export PUMBAA_LLM_PROVIDER=gemini\nexport GEMINI_API_KEY=&lt;your-api-key&gt;\nexport GEMINI_MODEL=gemini-2.0-flash  # optional\n</code></pre> <pre><code>export PUMBAA_LLM_PROVIDER=ollama\nexport OLLAMA_HOST=http://localhost:11434\nexport OLLAMA_MODEL=llama3.2:3b\n</code></pre> <pre><code>export PUMBAA_LLM_PROVIDER=vertex\nexport VERTEX_PROJECT=&lt;project-id&gt;\nexport VERTEX_LOCATION=us-central1\nexport VERTEX_MODEL=gemini-2.0-flash\n</code></pre>"},{"location":"features/chat/#session-storage","title":"Session Storage","text":"<pre><code>export PUMBAA_SESSION_DB=~/.pumbaa/sessions.db\n</code></pre>"},{"location":"features/chat/#example-prompts","title":"Example Prompts","text":"<p>Try these prompts</p> <ul> <li>\"List my running workflows\"</li> <li>\"What is the status of workflow abc-123?\"</li> <li>\"Show me the outputs of workflow xyz-456\"</li> <li>\"Read gs://bucket/path/to/file.txt\"</li> <li>\"Query last 5 failed workflows\"</li> </ul>"},{"location":"features/dashboard/","title":"Dashboard","text":"<p>Interactive TUI for monitoring Cromwell workflows.</p> <ul> <li> <p> Smart Filtering</p> <p>Filter by status, name, or labels</p> </li> <li> <p> Keyboard-first</p> <p>Navigate efficiently without touching the mouse</p> </li> </ul>"},{"location":"features/dashboard/#quick-start","title":"Quick Start","text":"<pre><code>pumbaa dashboard\n</code></pre>"},{"location":"features/dashboard/#controls","title":"Controls","text":"Key Action Up / Down Navigate Enter Open debug view A Abort workflow S Filter by status / Filter by name L Filter by label R Refresh Ctrl+X Clear filters Q Quit"},{"location":"features/dashboard/#features","title":"Features","text":"<ul> <li> <p> Status Filter</p> <p>Filter by All / Running / Failed / Succeeded</p> </li> <li> <p> Name Filter</p> <p>Press / to search by workflow name</p> </li> <li> <p> Label Filter</p> <p>Press L to filter by workflow labels</p> </li> <li> <p> Abort</p> <p>Press A to abort with confirmation</p> </li> </ul>"},{"location":"features/dashboard/#workflow-columns","title":"Workflow Columns","text":"Column Description ID First 8 chars of workflow UUID Name From WDL workflow definition Status Color-coded (Running/Succeeded/Failed) Submitted Submission timestamp Labels User-submitted labels"},{"location":"features/dashboard/#see-also","title":"See Also","text":"<ul> <li> Debug View</li> <li> Query</li> </ul>"},{"location":"features/debug/","title":"Debug View","text":"<p>Inspect workflow execution tree and call-level details.</p> <ul> <li> <p> Execution Tree</p> <p>Navigate workflow structure with expandable nodes</p> </li> <li> <p> Call Details</p> <p>View inputs, outputs, commands, and logs</p> </li> <li> <p> Timeline Analysis</p> <p>Visualize task durations and identify bottlenecks</p> </li> <li> <p> Resource Efficiency</p> <p>Analyze CPU, memory, and disk utilization</p> </li> </ul> <p>Requirement</p> <p>Requires a working connection to your Cromwell server (set via <code>--host</code> or <code>CROMWELL_HOST</code>).</p>"},{"location":"features/debug/#quick-start","title":"Quick Start","text":"From DashboardCLI <p>Press Enter on any workflow</p> <pre><code>pumbaa workflow debug &lt;workflow-id&gt;\n</code></pre>"},{"location":"features/debug/#navigation","title":"Navigation","text":"Key Action Up / Down Navigate tree Right / Left Expand / Collapse Enter Toggle expand Tab Switch panel focus E Expand all nodes C Collapse all nodes Q Back / Quit"},{"location":"features/debug/#quick-actions","title":"Quick Actions","text":"<p>Quick actions are context-sensitive and depend on the selected node type. Press number keys 1 to 5 to trigger actions.</p>"},{"location":"features/debug/#workflow-subworkflow-nodes","title":"Workflow / SubWorkflow Nodes","text":"Key Action Description 1 Inputs Open modal with workflow inputs 2 Outputs Open modal with workflow outputs 3 Options View submitted workflow options 4 Timeline Open timeline modal (tasks sorted by duration) 5 Workflow Log Load and display workflow log"},{"location":"features/debug/#task-shard-nodes","title":"Task / Shard Nodes","text":"Key Action Description 1 Inputs Open modal with task inputs 2 Outputs Open modal with task outputs 3 Command View executed command 4 Logs Switch to logs view (stdout/stderr/monitoring) 5 Efficiency Analyze resource usage (requires monitoring script) <p>Copy to Clipboard</p> <p>In modals, press Y to copy content to clipboard.</p>"},{"location":"features/debug/#timeline-analysis","title":"Timeline Analysis","text":"<p>Press 4 on a Workflow or SubWorkflow node to open the timeline modal.</p> <p>The timeline shows:</p> <ul> <li>Tasks sorted by duration (longest first)</li> <li>Visual timeline bars showing when each task ran relative to workflow start</li> <li>Time range for each task (start \u2192 end)</li> <li>Status icons (\u2713 Done, \u25cf Running, \u2717 Failed, \u21ba Preempted)</li> </ul> <p>Subworkflow Timelines</p> <p>Navigate to a subworkflow node and press 4 to see its specific timeline, separate from the parent workflow.</p>"},{"location":"features/debug/#resource-efficiency","title":"Resource Efficiency","text":"<p>Press 5 on a Task or Shard node to analyze resource utilization.</p> <p>Requirement</p> <p>This feature requires the monitoring script to be configured in Cromwell. See Resource Monitoring.</p> <p>Displayed metrics:</p> Metric Description CPU Peak and average usage vs. allocated cores Memory Peak usage vs. allocated memory Disk Peak usage vs. allocated disk space Efficiency % Visual gauge showing utilization percentage <p>Cost Optimization</p> <p>Low efficiency indicates over-provisioned resources. Consider reducing CPU/memory/disk allocations for tasks with &lt; 50% efficiency.</p>"},{"location":"features/debug/#preemption-summary","title":"Preemption Summary","text":"<p>For Workflow and SubWorkflow nodes running with preemptible instances, the details panel shows:</p> <ul> <li>Cost Efficiency \u2014 Overall efficiency considering preemption overhead</li> <li>Preemptible/Total Tasks \u2014 How many tasks used preemptible instances</li> <li>Total Attempts \u2014 Including retries after preemptions</li> <li>Total Preemptions \u2014 Number of times tasks were preempted</li> </ul>"},{"location":"features/debug/#problematic-tasks","title":"Problematic Tasks","text":"<p>Tasks with high preemption impact are highlighted:</p> <ul> <li>Tasks with &lt; 70% cost efficiency</li> <li>Tasks where preemption caused &gt; 10% cost overhead</li> </ul> <p>Subworkflows</p> <p>Preemption stats are calculated per-level. Navigate into subworkflows to see their individual preemption analysis.</p>"},{"location":"features/debug/#scattershard-summary","title":"Scatter/Shard Summary","text":"<p>For Call nodes with multiple shards (scatter operations), the panel shows:</p> <ul> <li>Total Shards count</li> <li>Status Breakdown \u2014 Done, Running, Failed, Preempted counts</li> <li>Timing Statistics \u2014 Wall clock, min/max/avg per-shard duration</li> </ul> <p>Expand the node to navigate individual shards.</p>"},{"location":"features/debug/#see-also","title":"See Also","text":"<ul> <li> Dashboard</li> <li> Metadata</li> <li> Resource Monitoring</li> </ul>"},{"location":"features/metadata/","title":"Metadata","text":"<p>Get detailed workflow metadata.</p> <ul> <li> <p> Complete Info</p> <p>Inputs, outputs, timing, labels, and more</p> </li> <li> <p> Debug Failures</p> <p>Inspect failed task details</p> </li> <li> <p> Execution Timing</p> <p>Review start/end timestamps</p> </li> </ul>"},{"location":"features/metadata/#quick-start","title":"Quick Start","text":"<pre><code>pumbaa workflow metadata &lt;workflow-id&gt; [FLAGS]\n</code></pre>"},{"location":"features/metadata/#flags","title":"Flags","text":"Flag Alias Description <code>--verbose</code> <code>-v</code> Show detailed call information"},{"location":"features/metadata/#examples","title":"Examples","text":"BasicVerbose <pre><code>pumbaa workflow metadata abc12345\n</code></pre> <pre><code>pumbaa workflow metadata abc12345 --verbose\n</code></pre>"},{"location":"features/metadata/#output","title":"Output","text":"Section Description Workflow ID Full UUID Name WDL workflow name Status Current state Timing Start/end timestamps Inputs Submitted inputs Outputs Generated outputs Labels User labels Calls Task execution details (with <code>-v</code>)"},{"location":"features/metadata/#use-cases","title":"Use Cases","text":"<ul> <li> <p> Debug Failures</p> <p>Inspect failed task details</p> </li> <li> <p> Extract Outputs</p> <p>Find output file paths</p> </li> <li> <p> Check Timing</p> <p>Review execution duration</p> </li> <li> <p> Verify Inputs</p> <p>Confirm submitted parameters</p> </li> </ul>"},{"location":"features/metadata/#see-also","title":"See Also","text":"<ul> <li> Debug View \u2014 Interactive exploration</li> <li> Query \u2014 List workflows</li> </ul>"},{"location":"features/query/","title":"Query Workflows","text":"<p>List and filter workflows via CLI.</p> <ul> <li> <p> Flexible Filters</p> <p>Filter by name, status, or combine criteria</p> </li> <li> <p> Table Output</p> <p>Clean, color-coded workflow listings</p> </li> </ul>"},{"location":"features/query/#quick-start","title":"Quick Start","text":"<pre><code>pumbaa workflow query [FLAGS]\n</code></pre>"},{"location":"features/query/#flags","title":"Flags","text":"Flag Alias Description <code>--name</code> <code>-n</code> Filter by workflow name <code>--status</code> <code>-s</code> Filter by status (repeatable) <code>--limit</code> <code>-l</code> Max results (default: 20)"},{"location":"features/query/#examples","title":"Examples","text":"List AllBy StatusBy NameCombined <pre><code>pumbaa workflow query\n</code></pre> <pre><code>pumbaa workflow query --status Running\npumbaa workflow query --status Failed --status Aborting\n</code></pre> <pre><code>pumbaa workflow query --name variant-calling\n</code></pre> <pre><code>pumbaa workflow query \\\n  --name pipeline \\\n  --status Succeeded \\\n  --limit 10\n</code></pre>"},{"location":"features/query/#status-values","title":"Status Values","text":"Status Description <code>Submitted</code> Pending execution <code>Running</code> Currently executing <code>Succeeded</code> Completed successfully <code>Failed</code> Execution failed <code>Aborting</code> Being aborted <code>Aborted</code> Aborted by user"},{"location":"features/query/#output","title":"Output","text":"<p>Displays table with:</p> <ul> <li>ID \u2014 First 8 chars</li> <li>Name \u2014 Workflow name</li> <li>Status \u2014 Color-coded</li> <li>Submitted \u2014 Timestamp</li> </ul>"},{"location":"features/query/#see-also","title":"See Also","text":"<ul> <li> Dashboard \u2014 Interactive query</li> <li> Metadata \u2014 Detailed workflow info</li> </ul>"},{"location":"features/resource-monitoring/","title":"Resource Monitoring Script","text":"<p>Monitor computational resource usage for Cromwell tasks to estimate efficiency.</p> <ul> <li> <p> Lightweight</p> <p>Uses only native Linux tools (<code>/proc</code> filesystem)</p> </li> <li> <p> No Dependencies</p> <p>Works on most Linux distributions</p> </li> <li> <p> Complete Metrics</p> <p>CPU, memory, disk I/O, disk space, and network</p> </li> <li> <p> TSV Format</p> <p>Easy to analyze with <code>awk</code>, <code>pandas</code>, or Excel</p> </li> </ul> <p> Download resource_monitor.sh</p>"},{"location":"features/resource-monitoring/#collected-metrics","title":"Collected Metrics","text":"Column Description <code>timestamp</code> Date and time <code>cpu_percent</code> CPU usage (all cores) <code>mem_used_mb</code> Used memory (MB) <code>mem_total_mb</code> Total memory (MB) <code>mem_percent</code> Memory usage % <code>disk_total_gb</code> Total disk (GB) <code>disk_used_gb</code> Used disk (GB) <code>disk_avail_gb</code> Available disk (GB) <code>disk_percent</code> Disk usage % <code>disk_read_mb</code> MB read since last measurement <code>disk_write_mb</code> MB written since last measurement <code>net_rx_mb</code> Network MB received <code>net_tx_mb</code> Network MB transmitted"},{"location":"features/resource-monitoring/#quick-start","title":"Quick Start","text":""},{"location":"features/resource-monitoring/#syntax","title":"Syntax","text":"<pre><code>./resource_monitor.sh [interval_seconds] [disk_path]\n</code></pre>"},{"location":"features/resource-monitoring/#parameters","title":"Parameters","text":"Parameter Default Description <code>interval_seconds</code> <code>10</code> Time between measurements <code>disk_path</code> <code>/mnt/disks/cromwell_root/</code> Disk path to monitor"},{"location":"features/resource-monitoring/#examples","title":"Examples","text":"BasicSave to FileCustom Interval <pre><code>./resource_monitor.sh\n</code></pre> <pre><code>./resource_monitor.sh &gt; resource_metrics.tsv\n</code></pre> <pre><code>./resource_monitor.sh 5 &gt; resource_metrics.tsv\n</code></pre>"},{"location":"features/resource-monitoring/#cromwell-integration","title":"Cromwell Integration","text":"<p>To use this script as a Cromwell monitoring script, configure it in your backend options.</p> <p>Cromwell Documentation</p> <p>For detailed configuration instructions, see the official Cromwell Workflow Options documentation.</p>"},{"location":"features/submit/","title":"Submit Workflows","text":"<p>Submit WDL workflows to Cromwell.</p> <ul> <li> <p> One Command</p> <p>Submit workflows with a single CLI command</p> </li> <li> <p> Labels Support</p> <p>Organize workflows with custom labels</p> </li> <li> <p> Dependencies</p> <p>Include imported WDL files via ZIP bundles</p> </li> </ul>"},{"location":"features/submit/#quick-start","title":"Quick Start","text":"<pre><code>pumbaa workflow submit --workflow FILE [OPTIONS]\n</code></pre>"},{"location":"features/submit/#flags","title":"Flags","text":"Flag Alias Required Description <code>--workflow</code> <code>-w</code> WDL workflow file <code>--inputs</code> <code>-i</code> Inputs JSON file <code>--options</code> <code>-o</code> Options JSON file <code>--dependencies</code> <code>-d</code> Dependencies ZIP file <code>--label</code> <code>-l</code> Labels (<code>key=value</code>)"},{"location":"features/submit/#examples","title":"Examples","text":"BasicWith InputsComplete <pre><code>pumbaa workflow submit --workflow hello.wdl\n</code></pre> <pre><code>pumbaa workflow submit \\\n  --workflow pipeline.wdl \\\n  --inputs inputs.json\n</code></pre> <pre><code>pumbaa workflow submit \\\n  --workflow analysis.wdl \\\n  --inputs inputs.json \\\n  --options options.json \\\n  --dependencies deps.zip \\\n  --label sample=S001 \\\n  --label env=prod\n</code></pre>"},{"location":"features/submit/#input-file","title":"Input File","text":"<p>JSON format matching WDL inputs:</p> <pre><code>{\n  \"workflow.sample_name\": \"SAMPLE-001\",\n  \"workflow.fastq\": \"gs://bucket/sample.fastq.gz\",\n  \"workflow.reference\": \"gs://bucket/ref.fa\"\n}\n</code></pre>"},{"location":"features/submit/#options-file","title":"Options File","text":"<p>Configure workflow execution:</p> <pre><code>{\n  \"final_workflow_outputs_dir\": \"gs://bucket/outputs\",\n  \"delete_intermediate_output_files\": true,\n  \"write_to_cache\": true,\n  \"read_from_cache\": true\n}\n</code></pre> Option Description <code>final_workflow_outputs_dir</code> Output location <code>delete_intermediate_output_files</code> Cleanup intermediates <code>write_to_cache</code> / <code>read_from_cache</code> Call caching"},{"location":"features/submit/#dependencies","title":"Dependencies","text":"<p>For workflows with imports, create ZIP with imported files:</p> <pre><code>pumbaa bundle create --workflow workflow.wdl --output deps.zip\n</code></pre> <p>Then submit:</p> <pre><code>pumbaa workflow submit --workflow workflow.wdl --dependencies deps.zip\n</code></pre>"},{"location":"features/submit/#labels","title":"Labels","text":"<p>Organize workflows with labels:</p> <pre><code>pumbaa workflow submit \\\n  --workflow pipeline.wdl \\\n  --label sample=S001 \\\n  --label pipeline=variant-calling \\\n  --label user=$USER\n</code></pre> <p>Filter in Dashboard</p> <p>Press L in dashboard to filter by labels.</p>"},{"location":"features/submit/#response","title":"Response","text":"<pre><code>{\n  \"id\": \"abc12345-6789-0def-ghij-klmnopqrstuv\",\n  \"status\": \"Submitted\"\n}\n</code></pre> <p>Use the ID to monitor:</p> <pre><code>pumbaa dashboard                    # Interactive\npumbaa workflow debug &lt;id&gt;          # Debug view  \npumbaa workflow query --id &lt;id&gt;     # CLI query\n</code></pre>"},{"location":"features/submit/#see-also","title":"See Also","text":"<ul> <li> Bundle Creation</li> <li> Dashboard</li> <li> Debug View</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Pumbaa can be configured through the interactive wizard, command-line flags, environment variables, or a configuration file.</p>"},{"location":"getting-started/configuration/#quick-setup-recommended","title":"Quick Setup (Recommended)","text":"<pre><code>pumbaa config init\n</code></pre> <p>This wizard guides you through:</p> <ol> <li> Choosing your LLM provider (Ollama, Gemini API, or Vertex AI)</li> <li> Provider-specific settings (API key, model, etc.)</li> <li> Cromwell server URL</li> <li> Optional WDL directory for chat context</li> </ol> <p>Config Location</p> <p>Configuration is saved to <code>~/.pumbaa/config.yaml</code></p>"},{"location":"getting-started/configuration/#configuration-commands","title":"Configuration Commands","text":"<pre><code># Interactive setup wizard\npumbaa config init\n\n# Set individual values\npumbaa config set &lt;key&gt; &lt;value&gt;\n\n# Get a value\npumbaa config get &lt;key&gt;\n\n# List all configuration\npumbaa config list\n\n# Show config file path\npumbaa config path\n</code></pre>"},{"location":"getting-started/configuration/#available-keys","title":"Available Keys","text":"Key Description Example <code>llm_provider</code> LLM backend <code>ollama</code>, <code>gemini</code>, <code>vertex</code> <code>cromwell_host</code> Cromwell server URL <code>http://localhost:8000</code> <code>ollama_host</code> Ollama server URL <code>http://localhost:11434</code> <code>ollama_model</code> Ollama model name <code>llama3.2:3b</code> <code>gemini_api_key</code> Gemini API key <code>AIza...</code> <code>gemini_model</code> Gemini model <code>gemini-2.0-flash</code> <code>vertex_project</code> GCP project ID <code>my-project</code> <code>vertex_location</code> Vertex AI region <code>us-central1</code> <code>vertex_model</code> Vertex AI model <code>gemini-2.0-flash</code> <code>wdl_directory</code> WDL files for context <code>/path/to/workflows</code>"},{"location":"getting-started/configuration/#configuration-priority","title":"Configuration Priority","text":"<p>Settings are applied in this order (later overrides earlier):</p> <pre><code>flowchart LR\n    A[Default Values] --&gt; B[Config File]\n    B --&gt; C[Environment Variables]\n    C --&gt; D[Command-line Flags]</code></pre>"},{"location":"getting-started/configuration/#cromwell-server","title":"Cromwell Server","text":"Config CommandEnvironment VariableCommand-line Flag <pre><code>pumbaa config set cromwell_host http://cromwell.example.com:8000\n</code></pre> <pre><code>export CROMWELL_HOST=http://cromwell.example.com:8000\n</code></pre> <pre><code>pumbaa --host http://cromwell.example.com:8000 dashboard\n</code></pre> <p>Default</p> <p>The default host is <code>http://localhost:8000</code></p>"},{"location":"getting-started/configuration/#chat-llm-providers","title":"Chat LLM Providers","text":"Gemini API Ollama (Local) Vertex AI <p>Get your API key at Google AI Studio.</p> <pre><code>pumbaa config set llm_provider gemini\npumbaa config set gemini_api_key &lt;your-api-key&gt;\n</code></pre> <pre><code>pumbaa config set llm_provider ollama\npumbaa config set ollama_host http://localhost:11434\npumbaa config set ollama_model llama3.2:3b\n</code></pre> <pre><code>pumbaa config set llm_provider vertex\npumbaa config set vertex_project &lt;project-id&gt;\npumbaa config set vertex_location us-central1\n</code></pre>"},{"location":"getting-started/configuration/#authentication","title":"Authentication","text":"<p>Pumbaa assumes a direct connection to a reachable Cromwell server; it does not perform authentication itself.</p> Port-forwarding from Kubernetes <pre><code>kubectl -n &lt;namespace&gt; port-forward svc/cromwell 8000:8000\npumbaa config set cromwell_host http://localhost:8000\n</code></pre>"},{"location":"getting-started/configuration/#telemetry","title":"Telemetry","text":"<p>Pumbaa collects anonymous usage statistics to help improve the tool.</p> <p>What we collect</p> <ul> <li>Command name (e.g., <code>pumbaa chat</code>)</li> <li>Pumbaa version</li> <li>OS / Architecture</li> <li>Execution duration</li> <li>Success/Failure status</li> </ul> <p>What we DO NOT collect</p> <ul> <li>Argument or flag values</li> <li>File paths or API keys</li> <li>File contents</li> <li>Personal information</li> </ul>"},{"location":"getting-started/configuration/#opt-out","title":"Opt-Out","text":"Config CommandEnvironment Variable <pre><code>pumbaa config set telemetry_enabled false\n</code></pre> <pre><code>export PUMBAA_TELEMETRY_ENABLED=false\n</code></pre>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li> Quick Start \u2014 Run your first commands</li> <li> Dashboard \u2014 Interactive workflow management</li> <li> Chat Agent \u2014 Query with AI</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Install Pumbaa \u2014 a single binary with no dependencies.</p>"},{"location":"getting-started/installation/#quick-install-recommended","title":"Quick Install (Recommended)","text":"Linux /  macOS <pre><code>curl -sSL https://raw.githubusercontent.com/lmtani/pumbaa/main/install.sh | bash\n</code></pre> <p>This script will:</p> <ol> <li> Detect your OS and architecture</li> <li> Download the appropriate binary from GitHub Releases</li> <li> Install it to <code>/usr/local/bin/pumbaa</code></li> <li> Make it executable</li> </ol> <p>Verify Installation</p> <pre><code>pumbaa --version\n</code></pre>"},{"location":"getting-started/installation/#manual-download","title":"Manual Download","text":"<p>If you prefer to install manually:</p>"},{"location":"getting-started/installation/#step-1-download-from-github-releases","title":"Step 1: Download from GitHub Releases","text":"<p> Go to Releases</p> Platform Architecture Asset  Linux x86_64 <code>pumbaa_Linux_x86_64.tar.gz</code>  Linux ARM64 <code>pumbaa_Linux_arm64.tar.gz</code>  macOS x86_64 <code>pumbaa_Darwin_x86_64.tar.gz</code>  macOS ARM64 <code>pumbaa_Darwin_arm64.tar.gz</code>"},{"location":"getting-started/installation/#step-2-extract-and-install","title":"Step 2: Extract and Install","text":"<pre><code># Extract\ntar -xzf pumbaa_*.tar.gz\n\n# Install\nchmod +x pumbaa\nsudo mv pumbaa /usr/local/bin/\n</code></pre>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":"Permission Denied <pre><code>chmod +x /path/to/pumbaa\n</code></pre> Command Not Found <p>Add to your PATH: <pre><code>export PATH=$PATH:/usr/local/bin\n</code></pre></p> macOS Security Warning <pre><code>xattr -d com.apple.quarantine /usr/local/bin/pumbaa\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li> Configuration \u2014 Set up Pumbaa</li> <li> Quick Start \u2014 Run your first commands</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Get up and running with Pumbaa in 5 minutes.</p>"},{"location":"getting-started/quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>Pumbaa installed (Installation Guide)</li> <li>Access to a Cromwell server</li> <li>(Optional) A WDL workflow file</li> </ul>"},{"location":"getting-started/quick-start/#configure-cromwell-server","title":"Configure Cromwell Server","text":"Config Wizard (Recommended)Environment VariablePersisted Config <pre><code>pumbaa config init\n</code></pre> <pre><code>export CROMWELL_HOST=http://localhost:8000\n</code></pre> <pre><code>pumbaa config set cromwell_host http://localhost:8000\n</code></pre>"},{"location":"getting-started/quick-start/#verify-connection","title":"Verify Connection","text":"<p>Test the connection to your Cromwell server:</p> <pre><code>pumbaa workflow query --limit 5\n</code></pre> <p>Expected Result</p> <p>You should see a list of recent workflows (or an empty list if none exist).</p>"},{"location":"getting-started/quick-start/#explore-the-dashboard","title":"Explore the Dashboard","text":"<p>Launch the interactive dashboard:</p> <pre><code>pumbaa dashboard\n</code></pre>"},{"location":"getting-started/quick-start/#dashboard-navigation","title":"Dashboard Navigation","text":"Key Action Up / K Move up Down / J Move down Enter Open debug view S Cycle status filter / Filter by name L Filter by label Ctrl+X Clear all filters A Abort workflow Shift+L Manage labels R Refresh Q Quit"},{"location":"getting-started/quick-start/#submit-a-workflow","title":"Submit a Workflow","text":"<pre><code>pumbaa workflow submit \\\n  --workflow myworkflow.wdl \\\n  --inputs inputs.json\n</code></pre> Example inputs.json <pre><code>{\n  \"myworkflow.input_file\": \"gs://bucket/data.txt\",\n  \"myworkflow.sample_name\": \"sample-001\"\n}\n</code></pre>"},{"location":"getting-started/quick-start/#monitor-workflow","title":"Monitor Workflow","text":"Query by StatusView MetadataDebug View <pre><code>pumbaa workflow query --status Running\n</code></pre> <pre><code>pumbaa workflow metadata &lt;workflow-id&gt;\n</code></pre> <pre><code>pumbaa workflow debug --id &lt;workflow-id&gt;\n</code></pre>"},{"location":"getting-started/quick-start/#common-tasks","title":"Common Tasks","text":"<ul> <li> <p> Abort Workflow</p> <pre><code>pumbaa workflow abort &lt;id&gt;\n</code></pre> </li> <li> <p> Bundle WDL</p> <pre><code>pumbaa bundle --workflow main.wdl\n</code></pre> </li> </ul>"},{"location":"getting-started/quick-start/#troubleshooting","title":"Troubleshooting","text":"Connection refused <p>Verify Cromwell is running: <pre><code>curl $CROMWELL_HOST/api/workflows/v1/query\n</code></pre></p> No workflows found <p>Submit a test workflow first.</p> Dashboard not updating <p>Press R to manually refresh.</p>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li> Dashboard Guide</li> <li> Debug View</li> <li> Chat Agent</li> <li> Submit Workflows</li> <li> Bundle WDL</li> </ul>"},{"location":"getting-started/quick-start/#getting-help","title":"Getting Help","text":"<pre><code>pumbaa --help\npumbaa &lt;command&gt; --help\n</code></pre> <p> GitHub Issues</p>"}]}